images <- list.files(path = "images", full.names = TRUE)
crypto <- crypto |>
arrange(symbol) |>
bind_cols("images" = images)
crypto <- crypto |>
mutate(
images = paste0("<img src='", images, "' width='25'/>")
)
crypto |>
ggplot(aes(price, fct_reorder(images, price))) +
geom_col(
width = .1,
fill = "red"
) +
geom_label(
aes(x = price, label = round(price, 2))
) +
labs("Price of the Top 20 Cryptocurrencies") +
scale_x_log10(label = scales::label_number()) +
theme_minimal() +
theme(
axis.text.y = ggtext::element_markdown(size = .1),
axis.ticks = element_blank(),
axis.title = element_blank()
)
crypto <- crypto |>
mutate(
images = paste0("<img src='", images, "' width='12'/>")
)
crypto
crypto <- crypto |>
mutate(
images = paste0("<img src='", images, "' width='12'/>")
)
crypto
#| label: load-packages
library(pacman)
p_load(rvest, tidyverse, magick, ggimage)
url <- "https://coinmarketcap.com/all/views/all/"
crypto <- read_html(url) |>
html_nodes("table") |>
html_table()
crypto <- crypto[[3]]
head(crypto)
#| label: data-clean-up
crypto <- crypto |>
janitor::clean_names() |>
select(name, symbol, market_cap, price)
glimpse(crypto)
#| label: missing-data-check
crypto <- crypto |>
mutate(
market_cap = str_remove_all(market_cap, r"--[\$[\d.]+[TB]]--"),
market_cap = parse_number(market_cap),
price = parse_number(price)
)
str(crypto)
#| label: check-missing
skimr::n_missing(crypto)
#| label: confirm-missing
skimr::skim(crypto)
#| label: final-check
crypto <- crypto[complete.cases(crypto), ]
skimr::skim_without_charts(crypto)
#| label: tbl-crypto-compression
#| tbl-cap: "Top Six Cryptocurrencies according to Market Capitalization"
#| tbl-subcap: "20 Cryptocurrencies has been compressed to 7 "
crypto <- crypto |>
mutate(
new_sym = fct_lump(
symbol, n = 6, w = market_cap
)
)
crypto |>
summarize(
.by = new_sym,
market_cap = sum(market_cap),
count = n()
)
crypto_summary <- crypto |>
summarize(
.by = new_sym,
market_cap = sum(market_cap)
) |>
mutate(
prop = market_cap/sum(market_cap),
market_cap = round(market_cap/1e9, 2),
market_cap = paste0(market_cap, " B"),
ymax = cumsum(prop),
ymin = c(0, head(ymax, n = -1)),
lab_pos = (ymax + ymin)/2,
label = paste0(new_sym, "\nValue: ",round(prop, 2), "%")
)
#| labels: doughnut-chart
ggplot(
crypto_summary,
aes(xmin = 3, xmax = 4,ymin = ymin, ymax = ymax, fill = new_sym)
) +
geom_rect() +
expand_limits(x = c(1.5, 4)) +
coord_polar(theta = "y", start = 1) +
scale_fill_brewer(palette ="YlOrRd") +
theme_void() +
ggrepel::geom_label_repel(
x = 3,
aes(y = lab_pos, label = label),
size = 2,
col = "gray3"
) +
theme_void() +
ggtitle("Market Cap of Top Cryptocurrencies") +
theme(
legend.position = "none"
)
#| lable: get-images
images <- list.files(path = "images", full.names = TRUE)
crypto <- crypto |>
arrange(symbol) |>
bind_cols("images" = images)
crypto <- crypto |>
mutate(
images = paste0("<img src='", images, "' width='12'/>")
)
crypto |>
ggplot(aes(price, fct_reorder(images, price))) +
geom_col(
width = .1,
fill = "red"
) +
geom_label(
aes(x = price, label = round(price, 2))
) +
labs("Price of the Top 20 Cryptocurrencies") +
scale_x_log10(label = scales::label_number()) +
theme_minimal() +
theme(
axis.text.y = ggtext::element_markdown(size = .1),
axis.ticks = element_blank(),
axis.title = element_blank()
)
#| label: load-packages
library(pacman)
p_load(rvest, tidyverse, magick, ggimage)
url <- "https://coinmarketcap.com/all/views/all/"
crypto <- read_html(url) |>
html_nodes("table") |>
html_table()
crypto <- crypto[[3]]
head(crypto)
#| label: data-clean-up
crypto <- crypto |>
janitor::clean_names() |>
select(name, symbol, market_cap, price)
glimpse(crypto)
#| label: missing-data-check
crypto <- crypto |>
mutate(
market_cap = str_remove_all(market_cap, r"--[\$[\d.]+[TB]]--"),
market_cap = parse_number(market_cap),
price = parse_number(price)
)
str(crypto)
#| label: check-missing
skimr::n_missing(crypto)
#| label: confirm-missing
skimr::skim(crypto)
#| label: final-check
crypto <- crypto[complete.cases(crypto), ]
skimr::skim_without_charts(crypto)
#| label: tbl-crypto-compression
#| tbl-cap: "Top Six Cryptocurrencies according to Market Capitalization"
#| tbl-subcap: "20 Cryptocurrencies has been compressed to 7 "
crypto <- crypto |>
mutate(
new_sym = fct_lump(
symbol, n = 6, w = market_cap
)
)
crypto |>
summarize(
.by = new_sym,
market_cap = sum(market_cap),
count = n()
)
crypto_summary <- crypto |>
summarize(
.by = new_sym,
market_cap = sum(market_cap)
) |>
mutate(
prop = market_cap/sum(market_cap),
market_cap = round(market_cap/1e9, 2),
market_cap = paste0(market_cap, " B"),
ymax = cumsum(prop),
ymin = c(0, head(ymax, n = -1)),
lab_pos = (ymax + ymin)/2,
label = paste0(new_sym, "\nValue: ",round(prop, 2), "%")
)
#| labels: doughnut-chart
ggplot(
crypto_summary,
aes(xmin = 3, xmax = 4,ymin = ymin, ymax = ymax, fill = new_sym)
) +
geom_rect() +
expand_limits(x = c(1.5, 4)) +
coord_polar(theta = "y", start = 1) +
scale_fill_brewer(palette ="YlOrRd") +
theme_void() +
ggrepel::geom_label_repel(
x = 3,
aes(y = lab_pos, label = label),
size = 2,
col = "gray3"
) +
theme_void() +
ggtitle("Market Cap of Top Cryptocurrencies") +
theme(
legend.position = "none"
)
#| lable: get-images
images <- list.files(path = "images", full.names = TRUE)
crypto <- crypto |>
arrange(symbol) |>
bind_cols("images" = images)
crypto_img <- crypto |>
mutate(
images = paste0("<img src='", images, "' width='12'/> \n **", symbol, "**")
)
crypto_img |>
ggplot(aes(price, fct_reorder(images, price))) +
geom_col(
width = .1,
fill = "red"
) +
geom_label(
aes(x = price, label = round(price, 2))
) +
labs("Price of the Top 20 Cryptocurrencies") +
scale_x_log10(label = scales::label_number()) +
theme_minimal() +
theme(
axis.text.y = ggtext::element_markdown(size = .1),
axis.ticks = element_blank(),
axis.title = element_blank()
)
crypto_img |>
ggplot(aes(price, fct_reorder(images, price))) +
geom_col(
width = .1,
fill = "red"
) +
geom_label(
aes(label = round(price, 2)),
col = "white",
fill = "#D98880"
) +
labs("Price of the Top 20 Cryptocurrencies") +
scale_x_log10(label = scales::label_number()) +
theme_minimal() +
theme(
axis.text.y = ggtext::element_markdown(size = .1),
axis.ticks = element_blank(),
axis.title = element_blank()
)
crypto_img |>
ggplot(aes(price, fct_reorder(images, price))) +
geom_col(
width = .1,
fill = "red"
) +
geom_label(
aes(label = round(price, 2)),
col = "yellow",
fill = "#D98880",
size = 2
) +
labs("Price of the Top 20 Cryptocurrencies") +
scale_x_log10(label = scales::label_number()) +
theme_minimal() +
theme(
axis.text.y = ggtext::element_markdown(size = .1),
axis.ticks = element_blank(),
axis.title = element_blank()
)
crypto_img |>
ggplot(aes(price, fct_reorder(images, price))) +
geom_col(
width = .1,
fill = "#AE1D0E"
) +
geom_label(
aes(label = round(price, 2)),
col = "#9FAE0E",
fill = "#AE450E",
size = 2.5
) +
labs("Price of the Top 20 Cryptocurrencies") +
scale_x_log10(label = scales::label_number()) +
theme_minimal() +
theme(
axis.text.y = ggtext::element_markdown(size = .1),
axis.ticks = element_blank(),
axis.title = element_blank()
)
crypto_img |>
ggplot(aes(price, fct_reorder(images, price))) +
geom_col(
width = .1,
fill = "#AE1D0E"
) +
geom_label(
aes(label = round(price, 2)),
col = "white",
fill = "#AE450E",
size = 2.5
) +
labs(
title = "Price of the Top 20 Cryptocurrencies"
) +
scale_x_log10(label = scales::label_number()) +
theme_minimal() +
theme(
axis.text.y = ggtext::element_markdown(size = .1),
axis.ticks = element_blank(),
axis.title = element_blank(),
plot.title = element_text(hjust = .5)
)
crypto_img |>
ggplot(aes(price, fct_reorder(images, price))) +
geom_col(
width = .1,
fill = "#AE450E"
) +
geom_label(
aes(label = round(price, 2)),
col = "white",
fill = "#AE1D0E",
size = 2.5
) +
labs(
title = "Price of the Top 20 Cryptocurrencies"
) +
scale_x_log10(label = scales::label_number()) +
theme_minimal() +
theme(
axis.text.y = ggtext::element_markdown(size = .1),
axis.ticks = element_blank(),
axis.title = element_blank(),
plot.title = element_text(hjust = .5)
)
crypto_img |>
ggplot(aes(price, fct_reorder(images, price))) +
geom_col(
width = .1,
fill = "#77AE0E"
) +
geom_label(
aes(label = round(price, 2)),
col = "white",
fill = "#AE1D0E",
size = 2.5
) +
labs(
title = "Price of the Top 20 Cryptocurrencies"
) +
scale_x_log10(label = scales::label_number()) +
theme_minimal() +
theme(
axis.text.y = ggtext::element_markdown(),
axis.ticks = element_blank(),
axis.title = element_blank(),
plot.title = element_text(hjust = .5, color = "#AE1D0E")
)
crypto_img <- crypto |>
mutate(
images = paste0("<img src='", images, "' width='12'/>\<br> **", symbol, "**")
crypto_img <- crypto |>
mutate(
images = paste0("<img src='", images, "' width='12'/>\ <br> **", symbol, "**")
)
crypto_img |>
ggplot(aes(price, fct_reorder(images, price))) +
geom_col(
width = .1,
fill = "#77AE0E"
) +
geom_label(
aes(label = round(price, 2)),
col = "white",
fill = "#AE1D0E",
size = 2.5
) +
labs(
title = "Price of the Top 20 Cryptocurrencies"
) +
scale_x_log10(label = scales::label_number()) +
theme_minimal() +
theme(
axis.text.y = ggtext::element_markdown(),
axis.ticks = element_blank(),
axis.title = element_blank(),
plot.title = element_text(hjust = .5, color = "#AE1D0E")
)
crypto_img |>
ggplot(aes(price, fct_reorder(images, price))) +
geom_col(
width = .1,
fill = "#77AE0E"
) +
geom_label(
aes(label = round(price, 2)),
col = "white",
fill = "#AE1D0E",
size = 2.5
) +
labs(
title = "Price of the Top 20 Cryptocurrencies"
) +
scale_x_log10(label = scales::label_number()) +
theme_minimal() +
theme(
axis.text.y = ggtext::element_markdown(size = 1),
axis.ticks = element_blank(),
axis.title = element_blank(),
plot.title = element_text(hjust = .5, color = "#AE1D0E")
)
crypto_img <- crypto |>
mutate(
images = paste0("<img src='", images, "' width='12'/>")
)
crypto_img |>
ggplot(aes(price, fct_reorder(images, price))) +
geom_col(
width = .1,
fill = "#77AE0E"
) +
geom_label(
aes(label = round(price, 2)),
col = "white",
fill = "#AE1D0E",
size = 2.5
) +
labs(
title = "Price of the Top 20 Cryptocurrencies"
) +
scale_x_log10(label = scales::label_number()) +
theme_minimal() +
theme(
axis.text.y = ggtext::element_markdown(),
axis.ticks = element_blank(),
axis.title = element_blank(),
plot.title = element_text(hjust = .5, color = "#AE1D0E")
)
crypto_img |>
ggplot(aes(price, fct_reorder(images, price))) +
geom_col(
width = .1,
fill = "#FBD25B"
) +
geom_label(
aes(label = round(price, 2)),
col = "white",
fill = "#AE1D0E",
size = 2.5
) +
labs(
title = "Price of the Top 20 Cryptocurrencies"
) +
scale_x_log10(label = scales::label_number()) +
theme_minimal() +
theme(
axis.text.y = ggtext::element_markdown(),
axis.ticks = element_blank(),
axis.title = element_blank(),
plot.title = element_text(hjust = .5, color = "#AE1D0E")
)
crypto_summary <- crypto |>
summarize(
.by = new_sym,
market_cap = sum(market_cap)
) |>
mutate(
prop = market_cap/sum(market_cap) * 100,
market_cap = round(market_cap/1e9, 2),
market_cap = paste0(market_cap, " B"),
ymax = cumsum(prop),
ymin = c(0, head(ymax, n = -1)),
lab_pos = (ymax + ymin)/2,
label = paste0(new_sym, "\nValue: ",round(prop, 2), "%")
)
#| labels: fig-market-cao
#| fig-cap: Crypto Asset Market Cap
ggplot(
crypto_summary,
aes(xmin = 3, xmax = 4,ymin = ymin, ymax = ymax, fill = new_sym)
) +
geom_rect() +
expand_limits(x = c(1.5, 4)) +
coord_polar(theta = "y", start = 1) +
scale_fill_brewer(palette ="YlOrRd") +
theme_void() +
ggrepel::geom_label_repel(
x = 3,
aes(y = lab_pos, label = label),
size = 2,
col = "gray3"
) +
theme_void() +
ggtitle("Market Cap of Top Cryptocurrencies") +
theme(
legend.position = "none"
)
