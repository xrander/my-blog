resamples = psm_folds,
seed = 124,
verbose = TRUE
)
collect_metrics(psm_mod)
collect_metrics(psm_mod) |>
filter(.metric == "rmse")
consider predict(., rankdeficient="NA")
predict(., rankdeficient="NA")
collect_metrics(psm_mod)
collect_metrics(psm_mod) |>
filter(.metric == "rmse")
collect_metrics(psm_mod) |>
filter(.metric == "rmse") |>
autoplot()
collect_metrics(psm_mod) |>
filter(.metric == "rmse")
collect_metrics(psm_mod) |>
filter(.metric == "rmse") |>
ggplot(aes(wflow_id, n)) +
geom_col()
collect_metrics(psm_mod) |>
filter(.metric == "rmse")
collect_metrics(psm_mod) |>
filter(.metric == "rmse") |>
ggplot(aes(wflow_id, mean)) +
geom_col()
collect_metrics(psm_mod) |>
filter(.metric == "rmse")
collect_metrics(psm_mod) |>
filter(.metric == "rmse") |>
select(wflow_id, mean, std_err)
collect_metrics(psm_mod) |>
filter(.metric == "rmse") |>
select(wflow_id, mean, std_err) |>
mutate(
ymax = mean + std_err,
ymin = mean - std_err
)
collect_metrics(psm_mod) |>
filter(.metric == "rmse") |>
select(wflow_id, mean, std_err) |>
mutate(
ymax = mean + std_err,
ymin = mean - std_err
) |>
ggplot(aes(wflow_id, mean)) +
geom_pointrange(aes(ymin = ymin, ymax =ymax))
collect_metrics(psm_mod) |>
filter(.metric == "rmse") |>
select(wflow_id, mean, std_err) |>
mutate(
ymax = mean + std_err,
ymin = mean - std_err
) |>
ggplot(aes(wflow_id, mean)) +
geom_point(size = 3) +
geom_pointrange(aes(ymin = ymin, ymax =ymax))
collect_metrics(psm_mod) |>
filter(.metric == "rmse") |>
select(wflow_id, mean, std_err) |>
mutate(
ymax = mean + std_err,
ymin = mean - std_err
) |>
ggplot(aes(wflow_id, mean)) +
geom_point(size = 3)
collect_metrics(psm_mod) |>
filter(.metric == "rmse") |>
select(wflow_id, mean, std_err) |>
mutate(
ymax = mean + std_err,
ymin = mean - std_err
) |>
ggplot(aes(wflow_id, mean)) +
geom_point(size = 3) +
geom_pointrange(aes(ymin = ymin, ymax =ymax))
collect_metrics(psm_mod) |>
filter(.metric == "rmse") |>
select(wflow_id, mean, std_err) |>
mutate(
ymax = mean + std_err,
ymin = mean - std_err
) |>
ggplot(aes(wflow_id, mean)) +
geom_pointrange(aes(ymin = ymin, ymax =ymax), col = "#12789f")
collect_metrics(psm_mod) |>
filter(.metric == "rmse") |>
select(wflow_id, mean, std_err) |>
mutate(
ymax = mean + std_err,
ymin = mean - std_err
) |>
ggplot(aes(wflow_id, mean)) +
geom_pointrange(aes(ymin = ymin, ymax =ymax, col = wflow_id)) +
labs(
x = "Preproc",
title = "RMSE of Possum Linear Regression Model for 3 Preprocessor"
)
collect_metrics(psm_mod) |>
filter(.metric == "rmse") |>
select(wflow_id, mean, std_err) |>
mutate(
ymax = mean + std_err,
ymin = mean - std_err
) |>
ggplot(aes(wflow_id, mean, col = wflow_id)) +
geom_pointrange(aes(ymin = ymin, ymax =ymax)) +
labs(
x = "Preproc",
title = "RMSE of Possum Linear Regression Model for 3 Preprocessor"
)
collect_metrics(psm_mod) |>
filter(.metric == "rmse") |>
select(wflow_id, mean, std_err) |>
mutate(
ymax = mean + std_err,
ymin = mean - std_err
) |>
ggplot(aes(wflow_id, mean, col = wflow_id)) +
geom_pointrange(aes(ymin = ymin, ymax =ymax)) +
labs(
x = "Preproc",
title = "RMSE of Possum Linear Regression Model for 3 Preprocessor"
) +
theme(legend.position = "none")
anova(psm_mod)
collect_metrics(psm_mod) |>
filter(.metric == "rmse") |>
select(wflow_id, mean, std_err)
mod_metric <- collect_metrics(psm_mod) |>
filter(.metric == "rmse") |>
select(wflow_id, mean, std_err)
mod_metric
aov(mean ~ wflow_id, data = mod_metric)
anova(aov(mean ~ wflow_id, data = mod_metric))
collect_metrics(psm_mod)
collect_metrics(psm_mod) |> kable()
select_best(psm_mod)
?select_best()
show_best(psm_mod)
psm_mod |>
extract_workflow()
psm_mod |>
extract_workflow(id = "pca_ols")
psm_mod |>
extract_workflow_set_result("pca_ols")
psm_mod |>
extract_workflow_set_result("pca_ols") |>
select_best(metric = "rmse")
psm_mod |>
extract_workflow_set_result("pca_ols")
psm_mod |>
extract_workflow_set_result("pca_ols") |>
select_best(metric = "rmse")
psm_mod |>
extract_workflow_set_result("pca_ols") |>
select_best(metric = "rmse") |>
gt::gt()
psm_mod |>
extract_workflow(id = "pca_ols")
psm_pca_mod
psm_pca_mod <- psm_mod |>
extract_workflow(id = "pca_ols")
psm_pca_mod
last_fit(
psm_pca_mod,
split = psm_split
)
psm_model <- last_fit(
psm_pca_mod,
split = psm_split
)
psm_model |>
collect_predictions()
psm_model |>
collect_predictions() |>
ggplot(aes(.pred, age)) +
geom_point()
psm_model |>
extract_fit_parsnip()
install.packages("vip")
psm_model |>
extract_fit_parsnip() |>
vip::vip(
num_features = 10,
geom = "col",
aesthetics = list(
fill = "tan",
col = "orange",
alpha = .6
)
)
psm_model |>
extract_fit_parsnip() |>
vip::vip(
num_features = 10,
geom = "col"
# aesthetics = list(
#   fill = "tan",
#   col = "orange",
#   alpha = .6
# )
)
psm_model |>
extract_fit_parsnip() |>
vip::vip(
num_features = 10,
geom = "col",
aesthetics = list(
fill = "aquamarine3",
alpha = .6
)
)
psm_model |>
extract_fit_parsnip() |>
vip::vip(
num_features = 10,
geom = "col",
aesthetics = list(
fill = "aquamarine3",
)
)
psm_model |>
extract_fit_parsnip() |>
vip::vip(
num_features = 10,
geom = "col",
aesthetics = list(
fill = "aquamarine3"
)
)
psm_model |>
extract_fit_parsnip() |>
vip::vip(
num_features = 10,
geom = "col",
aesthetics = list(
fill = "aquamarine3"
),
) +
ggtitle("Feature Importance")
psm_model |>
extract_fit_parsnip() |>
vip::vip(
num_features = 10,
geom = "col"
) +
ggtitle("Feature Importance")
psm_model |>
collect_metrics()
psm_model |>
collect_predictions()
psm_model |>
collect_predictions() |>
select("prediction" =.pred)
psm_model |>
collect_predictions()
psm_model |>
collect_predictions() |>
select("prediction" =.pred, age)
psm_model |>
collect_predictions() |>
select("prediction" =.pred, age) |>
mutate(
prediction = ceiling(prediction),
residual = age - prediction
)
psm_model |>
collect_predictions() |>
select("prediction" =.pred, age) |>
mutate(
prediction = ceiling(prediction),
residual = age - prediction
) |>
ggplot(
aes(age, residual)
) +
geom_point()
psm_model |>
collect_predictions() |>
select("prediction" =.pred, age) |>
mutate(
prediction = ceiling(prediction),
residual = age - prediction
) |>
ggplot(
aes(age, prediction)
) +
geom_point()
psm_model |>
collect_predictions() |>
select("prediction" =.pred, age) |>
mutate(
prediction = ceiling(prediction),
residual = age - prediction
) |>
ggplot(
aes(age, residual)
) +
geom_point()
psm_model |>
collect_predictions() |>
select("prediction" =.pred, age) |>
mutate(
prediction = ceiling(prediction),
residual = age - prediction
) |>
ggplot(
aes(age, residual)
) +
geom_point() +
geom_abline()
psm_model |>
collect_predictions() |>
select("prediction" =.pred, age) |>
mutate(
prediction = ceiling(prediction),
residual = age - prediction
) |>
ggplot(
aes(age, residual)
) +
geom_point() +
geom_hline(aes(yintercept = 0))
psm_model |>
collect_predictions() |>
select("prediction" =.pred, age) |>
mutate(
prediction = ceiling(prediction),
residual = age - prediction
) |>
ggplot(
aes(age, residual)
) +
geom_point() +
geom_hline(aes(yintercept = 0), col = "gray")
psm_model |>
collect_predictions() |>
select("prediction" =.pred, age) |>
mutate(
prediction = ceiling(prediction),
residual = age - prediction
) |>
ggplot(
aes(age, residual)
) +
geom_point() +
geom_hline(aes(yintercept = 0), col = "gray3")
#| label: fig-vip
#| fig-cap: PC1
psm_model |>
extract_fit_parsnip() |>
vip::vip(
num_features = 10,
geom = "col"
) +
ggtitle("Feature Importance")
psm |>
ggplot(aes(site, age, fill = pop)) +
geom_boxplot(position = "dodge") +
geom_jitter()+
facet_wrap(~pop, scales = "free")
psm |>
ggplot(aes(site, age, fill = pop, col = pop)) +
geom_boxplot(position = "dodge") +
geom_jitter()+
facet_wrap(~pop, scales = "free")
psm |>
ggplot(aes(site, age, fill = pop, col = pop)) +
geom_boxplot(position = "dodge") +
geom_jitter(size = .3)+
facet_wrap(~pop, scales = "free")
psm |>
ggplot(aes(site, age, fill = pop, col = pop)) +
geom_boxplot(position = "dodge") +
geom_jitter(size = .5)+
facet_wrap(~pop, scales = "free")
psm |>
ggplot(aes(site, age, fill = pop, col = pop)) +
geom_boxplot(position = "dodge") +
geom_jitter(size = .5) +
geom_violin() +
facet_wrap(~pop, scales = "free")
psm |>
ggplot(aes(site, age, fill = pop, col = pop)) +
geom_boxplot(position = "dodge") +
geom_jitter(size = .5) +
geom_violin(inherit.aes = FALSE) +
facet_wrap(~pop, scales = "free")
psm |>
ggplot(aes(site, age, fill = pop, col = pop)) +
geom_boxplot(position = "dodge") +
geom_jitter(size = .5) +
geom_violin(inherit.aes = FALSE, aes(site, age)) +
facet_wrap(~pop, scales = "free")
psm |>
ggplot(aes(site, age, fill = pop, col = pop)) +
geom_boxplot(position = "dodge", width = .6) +
geom_jitter(size = .5) +
facet_wrap(~pop, scales = "free")
psm |>
ggplot(aes(site, age, fill = pop, col = pop)) +
geom_boxplot(position = "dodge", width = .3) +
geom_jitter(size = .5) +
facet_wrap(~pop, scales = "free")
psm |>
ggplot(aes(site, age, fill = pop, col = pop)) +
geom_violin(inherit.aes = FALSE, aes(site, age)) +
geom_boxplot(position = "dodge", width = .3) +
geom_jitter(size = .5) +
facet_wrap(~pop, scales = "free")
psm |>
ggplot(aes(site, age, fill = pop, col = pop)) +
geom_violin(inherit.aes = FALSE, aes(site, age)) +
geom_boxplot(position = "dodge", width = .2) +
geom_jitter(size = .5) +
facet_wrap(~pop, scales = "free")
psm |>
mutate(
pop = case_when(
pop == "Vic" ~ "Victoria",
.default = "Others"
)
) |>
ggplot(aes(site, age, fill = pop, col = pop)) +
geom_violin(inherit.aes = FALSE, aes(site, age)) +
geom_boxplot(position = "dodge", width = .2) +
geom_jitter(size = .5) +
facet_wrap(~pop, scales = "free")
psm |>
mutate(
pop = case_when(
pop == "Vic" ~ "Victoria",
.default = "Others"
)
) |>
ggplot(aes(site, age, fill = pop, col = pop)) +
geom_violin(inherit.aes = FALSE, aes(site, age)) +
geom_boxplot(position = "dodge", width = .2) +
geom_jitter(size = .5) +
facet_wrap(~pop, scales = "free") +
coord_cartesian()
psm |>
mutate(
pop = case_when(
pop == "Vic" ~ "Victoria",
.default = "Others"
)
) |>
ggplot(aes(site, age, fill = pop, col = pop)) +
geom_violin(inherit.aes = FALSE, aes(site, age)) +
geom_boxplot(position = "dodge", width = .2) +
geom_jitter(size = .5) +
facet_wrap(~pop, scales = "free") +
coord_cartesian() +
coord_flip()
psm |>
mutate(
pop = case_when(
pop == "Vic" ~ "Victoria",
.default = "Others"
)
) |>
ggplot(aes(site, age, fill = pop, col = pop)) +
geom_violin(inherit.aes = FALSE, aes(site, age)) +
geom_boxplot(position = "dodge", width = .2) +
geom_jitter(size = .5) +
facet_wrap(~pop, scales = "free") +
coord_flip()
psm |>
mutate(
pop = case_when(
pop == "Vic" ~ "Victoria",
.default = "Others"
)
) |>
ggplot(aes(site, age, fill = pop, col = "#000")) +
geom_violin(inherit.aes = FALSE, aes(site, age)) +
geom_boxplot(position = "dodge", width = .2) +
geom_jitter(size = .5) +
facet_wrap(~pop, scales = "free") +
coord_flip()
psm |>
mutate(
pop = case_when(
pop == "Vic" ~ "Victoria",
.default = "Others"
)
) |>
ggplot(aes(site, age, fill = pop, col = "#000")) +
geom_violin(inherit.aes = FALSE, aes(site, age)) +
geom_boxplot(position = "dodge", width = .2) +
geom_jitter(size = .5) +
facet_wrap(~pop, scales = "free") +
coord_flip() +
theme(legend.position = "none")
read.csv("https://raw.githubusercontent.com/xrander/bootcamp-test/master/data/emission_data.csv")
readr::read_csv("https://raw.githubusercontent.com/xrander/bootcamp-test/master/data/emission_data.csv")
<- rep(c(1, 2),  5)
capstone_choice <- rep(c(1, 2),  5)
capstone_choice
capstone_choice
c("a", "f", "an", "t", "p", "no", "th", "na", "d", "ol")
data.frame(
name = c("a", "f", "an", "t", "p", "no", "th", "na", "d", "ol"),
question = sample(capstone_choice, 10)
)
data.frame(
name = c("a", "f", "an", "t", "p", "no", "th", "na", "d", "ol"),
question = sample(capstone_choice, 10)
)
