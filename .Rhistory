ft_tune |>
collect_predictions()
pacman::p_load(tidymodels, tidyverse, ggthemr)
ggthemr(
palette = "flat dark",
layout = "clean",
spacing = 2,
type = "outer"
)
darken_swatch(amount = .3)
pacman::p_load(tidymodels, tidyverse, ggthemr, readxl)
ggthemr(
palette = "flat dark",
layout = "clean",
spacing = 2,
type = "outer"
)
darken_swatch(amount = .3)
foreign::read.arff("data/Dry_Bean_Dataset.arff")
?foreign::read.arff()
pak::pkg_install(farrf)
pak::pkg_install("farrf")
pak::pkg_install("farff")
farff::readARFF("data/Dry_Bean_Dataset.arff")
read_excel("data/Dry_Bean_Dataset.xlsx")
#| message: false
#| warning: false
pacman::p_load(tidymodels, tidyverse, ggthemr, farrf)
#| message: false
#| warning: false
pacman::p_load(tidymodels, tidyverse, ggthemr, farff)
ggthemr(
palette = "flat dark",
layout = "clean",
spacing = 2,
type = "outer"
)
darken_swatch(amount = .3)
readARFF("data/Dry_Bean_Dataset.arff")
bean_tbl <- readARFF("data/Dry_Bean_Dataset.arff") |>
janitor::clean_names()
class(bean_tbl)
bean_tbl <- readARFF("data/Dry_Bean_Dataset.arff") |>
janitor::clean_names() |>
as_tibble()
class(bean_tbl)
bean_tbl
bean_split <- initial_split(bean_tbl, prop = .7, strata = class)
set.seed(122)
bean_split <- initial_split(bean_tbl, prop = .7, strata = class)
training(bean_split)
bean_train <- training(bean_split)
dim(bean_train)
#| message: false
#| warning: false
pacman::p_load(tidymodels, tidyverse, ggthemr, farff, earth)
mars_spec <- mars(
num_terms = tune(),
prod_degree = tune()
) |>
set_engine("earth") |>
set_mode("classification")
bean_folds <- vfold(bean_train, v = 10)
bean_folds <- vfold_cv(bean_train, v = 10)
ggplot(bean_tbl, aes(class)) |>
geom_bar()
ggplot(bean_tbl, aes(class)) +
geom_bar()
darken_swatch(amount = .1)
ggplot(bean_tbl, aes(class)) +
geom_bar()
lighten_swatch(amount = .1)
ggplot(bean_tbl, aes(class)) +
geom_bar()
darken_swatch(amount = .1)
ggplot(bean_tbl, aes(class)) +
geom_bar()
ggplot(bean_tbl, aes(class, y = after_stat(prop))) +
geom_bar()
ggplot(bean_tbl, aes(class)) +
geom_bar()
bean_tbl |>
pivot_longer(
cols = where(is.double),
names_to = "variable",
values_to = "value"
)
bean_tbl |>
pivot_longer(
cols = where(is.double),
names_to = "variable",
values_to = "value"
) |>
ggplot(
aes(variable, fill = value)
) +
geom_density
bean_tbl |>
pivot_longer(
cols = where(is.double),
names_to = "variable",
values_to = "value"
) |>
ggplot(
aes(variable, fill = value)
) +
geom_density()
bean_tbl |>
pivot_longer(
cols = where(is.double),
names_to = "variable",
values_to = "value"
) |>
ggplot(
aes(value, fill = variable)
) +
geom_density()
colors()
additional_colors <- c("#af4242", "#535364", "#FFC300", "#e09263", "#123367", "salmon", "#c0ca33", "#689f38", "#e53935")
swatch()
unique(swatch())
set_swatch(c(unique(swatch()), additional_colors))
bean_tbl |>
pivot_longer(
cols = where(is.double),
names_to = "variable",
values_to = "value"
) |>
ggplot(
aes(value, fill = variable)
) +
geom_density()
bean_tbl |>
pivot_longer(
cols = where(is.double),
names_to = "variable",
values_to = "value"
) |>
ggplot(
aes(value, fill = variable)
) +
geom_density() +
facet_grid(~variable)
bean_tbl |>
pivot_longer(
cols = where(is.double),
names_to = "variable",
values_to = "value"
) |>
ggplot(
aes(value, variable)
) +
ggridges::geom_density_ridges()
bean_tbl |>
pivot_longer(
cols = where(is.double),
names_to = "variable",
values_to = "value"
) |>
ggplot(
aes(value, variable)
) +
ggridges::geom_density_ridges(panel_scaling = TRUE)
bean_tbl |>
pivot_longer(
cols = where(is.double),
names_to = "variable",
values_to = "value"
) |>
ggplot(
aes(value, variable)
) +
ggridges::geom_density_ridges(panel_scaling = FALSE)
bean_tbl |>
pivot_longer(
cols = where(is.double),
names_to = "variable",
values_to = "value"
) |>
ggplot(
aes(value, fill = variable)
) +
geom_density()
bean_tbl |>
pivot_longer(
cols = where(is.double),
names_to = "variable",
values_to = "value"
) |>
ggplot(
aes(variable, value)
) +
geom_area()
bean_tbl |>
pivot_longer(
cols = where(is.double),
names_to = "variable",
values_to = "value"
) |>
ggplot(
aes(value, fill = variable)
) +
geom_area()
bean_tbl |>
pivot_longer(
cols = where(is.double),
names_to = "variable",
values_to = "value"
) |>
ggplot(
aes(x=1, value, fill = variable)
) +
geom_area()
bean_tbl |>
pivot_longer(
cols = where(is.double),
names_to = "variable",
values_to = "value"
) |>
coplot(value ~ variable)
?coplot()
bean_tbl |>
pivot_longer(
cols = where(is.double),
names_to = "variable",
values_to = "value"
) |>
coplot(value ~ variable | class)
bean_tbl |>
pivot_longer(
cols = where(is.double),
names_to = "variable",
values_to = "value"
)
bean_tbl |>
pivot_longer(
cols = where(is.double),
names_to = "variable",
values_to = "value"
) |>
group_by(variable) |>
ggplot(aes(value, fill = variable, group = variable)) +
geom_density()
bean_tbl |>
pivot_longer(
cols = where(is.double),
names_to = "variable",
values_to = "value"
) |>
group_by(variable) |>
ggplot(aes(value, fill = variable, group = variable)) +
geom_density() +
facet_wrap(~variable)
bean_tbl |>
pivot_longer(
cols = where(is.double),
names_to = "variable",
values_to = "value"
) |>
group_by(variable) |>
ggplot(aes(value, fill = variable, group = variable)) +
geom_density() +
facet_wrap(~variable, scales = "free")
bean_tbl |>
pivot_longer(
cols = where(is.double),
names_to = "variable",
values_to = "value"
) |>
filter(str_like(variable, "shape")) |>
ggplot(aes(value, fill = variable, group = variable)) +
geom_density() +
facet_wrap(~variable, scales = "free")
bean_tbl |>
pivot_longer(
cols = where(is.double),
names_to = "variable",
values_to = "value"
) |>
filter(str_like(variable, "shape")) |>
ggplot(aes(value, fill = variable, group = variable)) +
geom_density()
bean_tbl |>
pivot_longer(
cols = where(is.double),
names_to = "variable",
values_to = "value"
) |>
filter(str_like(variable, "shape"))
?str_like
?str_match()
bean_tbl |>
pivot_longer(
cols = where(is.double),
names_to = "variable",
values_to = "value"
) |>
filter(str_match(variable, "shape"))
bean_tbl |>
pivot_longer(
cols = where(is.double),
names_to = "variable",
values_to = "value"
) |>
filter(str_detect(variable, "shape"))
bean_tbl |>
pivot_longer(
cols = where(is.double),
names_to = "variable",
values_to = "value"
) |>
filter(str_detect(variable, "shape")) |>
ggplot(aes(value, fill = variable, group = variable)) +
geom_density()
bean_tbl |>
pivot_longer(
cols = where(is.double),
names_to = "variable",
values_to = "value"
) |>
filter(str_detect(variable, "shape")) |>
ggplot(aes(value, fill = variable, group = variable)) +
geom_density() |>
facet_wrap(~variable, scales = "free")
bean_tbl |>
pivot_longer(
cols = where(is.double),
names_to = "variable",
values_to = "value"
) |>
filter(str_detect(variable, "shape")) |>
ggplot(aes(value, fill = variable, group = variable)) +
geom_density() +
facet_wrap(~variable, scales = "free")
names(bean_tbl)
bean_long <- bean_tbl |>
pivot_longer(
cols = where(is.double),
names_to = "variable",
values_to = "value"
)
bean_long |>
filter(str_detect(variable, "shape")) |>
ggplot(aes(value, fill = variable, group = variable)) +
geom_density() +
facet_wrap(~variable, scales = "free")
bean_long |>
select(1:6) |>
ggplot(aes(value, fill = variable, group = variable)) +
geom_density() +
facet_wrap(~variable, scales = "free")
bean_long |>
select(c(1:6)) |>
ggplot(aes(value, fill = variable, group = variable)) +
geom_density() +
facet_wrap(~variable, scales = "free")
bean_long |>
select(1:6)
bean_col <- names(bean_tbl)
bean_long |>
filter(variable %in% c(bean_col[1:6])) |>
ggplot(aes(value, fill = variable, group = variable)) +
geom_density() +
facet_wrap(~variable, scales = "free")
bean_long |>
filter(variable %in% c(bean_col[1:6])) |>
ggplot(aes(value, fill = variable, group = variable)) +
geom_density() +
scale_y_continuous(labels = label_comma()) +
facet_wrap(~variable, scales = "free")
bean_long |>
select(7:12) |>
ggplot(aes(value, fill = variable, group = variable)) +
geom_density() +
scale_y_continuous(labels = label_comma()) +
facet_wrap(~variable, scales = "free")
bean_long |>
filter(variable %in% c(bean_col[7:12])) |>
ggplot(aes(value, fill = variable, group = variable)) +
geom_density() +
scale_y_continuous(labels = label_comma()) +
facet_wrap(~variable, scales = "free")
#| message: false
#| warning: false
pacman::p_load(tidymodels, tidyverse, ggthemr, farff, earth, patchwork)
a <- bean_long |>
filter(str_detect(variable, "shape")) |>
ggplot(aes(value, fill = variable, group = variable)) +
geom_density() +
scale_y_continuous(labels = label_comma()) +
facet_wrap(~variable, scales = "free")
b <- bean_long |>
filter(variable %in% c(bean_col[1:6])) |>
ggplot(aes(value, fill = variable, group = variable)) +
geom_density() +
scale_y_continuous(labels = label_comma()) +
facet_wrap(~variable, scales = "free")
c <- bean_long |>
filter(variable %in% c(bean_col[7:12])) |>
ggplot(aes(value, fill = variable, group = variable)) +
geom_density() +
scale_y_continuous(labels = label_comma()) +
facet_wrap(~variable, scales = "free")
a + b / c
a / (b + c)
b <- bean_long |>
filter(variable %in% c(bean_col[1:6])) |>
ggplot(aes(value, fill = variable, group = variable)) +
geom_density() +
scale_y_continuous(labels = label_comma()) +
facet_wrap(~variable, scales = "free") +
theme(
title = element_text(size = 5)
)
a / (b + c)
b <- bean_long |>
filter(variable %in% c(bean_col[1:6])) |>
ggplot(aes(value, fill = variable, group = variable)) +
geom_density() +
scale_y_continuous(labels = label_comma()) +
facet_wrap(~variable, scales = "free")
a / (b + c)
?scale_name
??scale_name
?discrete_scale()
?scale_y_continuous()
b <- bean_long |>
filter(variable %in% c(bean_col[1:6])) |>
ggplot(aes(value, fill = variable, group = variable)) +
geom_density() +
scale_y_continuous(labels = label_comma) +
facet_wrap(~variable, scales = "free")
b
b <- bean_long |>
filter(variable %in% c(bean_col[1:6])) |>
ggplot(aes(value, fill = variable, group = variable)) +
geom_density() +
scale_y_continuous(labels = label_comma()) +
facet_wrap(~variable, scales = "free")
b
mars_rec <- recipe(class ~ ., data = bean_train)
mars_workflow <- workflow() |>
add_recipe(mars_rec) |>
add_model(mars_spec)
dim(bean_tbl)
mars_spec |>
extract_parameter_set_dials() |>
update(
num_terms = num_terms(range = c(1, 17)),
prod_degree = prod_degree(range = c(1, 3))
)
mars_spec |>
extract_parameter_set_dials() |>
update(
num_terms = num_terms(range = c(1, 17)),
prod_degree = prod_degree(range = c(1, 3))
) |>
grid_regular(levels = 10)
mars_spec |>
extract_parameter_set_dials() |>
update(
num_terms = num_terms(range = c(1, 17)),
prod_degree = prod_degree(range = c(1, 3))
) |>
grid_regular(levels = 3)
mars_spec |>
extract_parameter_set_dials() |>
update(
num_terms = num_terms(range = c(1, 17)),
prod_degree = prod_degree(range = c(1, 3))
) |>
grid_regular(levels = 20)
mars_grid <- mars_spec |>
extract_parameter_set_dials() |>
update(
num_terms = num_terms(range = c(1, 17)),
prod_degree = prod_degree(range = c(1, 3))
) |>
grid_regular(levels = 20)
set.seed(122)
mars_grid <- mars_spec |>
extract_parameter_set_dials() |>
update(
num_terms = num_terms(range = c(1, 17)),
prod_degree = prod_degree(range = c(1, 3))
) |>
grid_regular(levels = 20)
tune_grid(
object = mars_workflow,
resamples = bean_folds,
grid = mars_grid,
control = control_grid(save_pred = TRUE, save_workflow = TRUE, verbose = TRUE)
)
mars_spec <- mars(
num_terms = tune(),
prod_degree = tune()
) |>
set_engine("earth", glm = NULL) |>
set_mode("classification")
tune_grid(
object = mars_workflow,
resamples = bean_folds,
grid = mars_grid,
control = control_grid(save_pred = TRUE, save_workflow = TRUE, verbose = TRUE)
)
tune_grid(
object = mars_workflow,
resamples = bean_folds,
grid = mars_grid,
control = control_grid(save_pred = TRUE, save_workflow = TRUE, verbose = TRUE),
metrics = metric_set(accuracy)
)
