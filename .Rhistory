geom_errorbar(aes(ymin = mean - std_err, ymax = mean + std_err)) +
geom_line()
elastic_tune |>
collect_metrics() |>
mutate(
model = "elastic"
) |>
bind_rows(
lasso_tune |>
collect_metrics() |>
mutate(
model = "lasso"
)
) |>
bind_rows(
ridge_tune |>
collect_metrics() |>
mutate(
model = "ridge"
)
) |>
filter(.metric == "rmse") |>
ggplot(aes(penalty, mean, color = model)) +
geom_jitter() +
geom_smooth(se - FALSE)
elastic_tune |>
collect_metrics() |>
mutate(
model = "elastic"
) |>
bind_rows(
lasso_tune |>
collect_metrics() |>
mutate(
model = "lasso"
)
) |>
bind_rows(
ridge_tune |>
collect_metrics() |>
mutate(
model = "ridge"
)
) |>
filter(.metric == "rmse") |>
ggplot(aes(penalty, mean, color = model)) +
geom_jitter() +
geom_smooth(se = FALSE)
elastic_tune |>
collect_metrics() |>
mutate(
model = "elastic"
) |>
bind_rows(
lasso_tune |>
collect_metrics() |>
mutate(
model = "lasso"
)
) |>
bind_rows(
ridge_tune |>
collect_metrics() |>
mutate(
model = "ridge"
)
) |>
filter(.metric == "rmse") |>
ggplot(aes(penalty, mean, color = model)) +
geom_jitter(width = .5) +
geom_smooth(se = FALSE)
elastic_tune |>
collect_metrics() |>
mutate(
model = "elastic"
) |>
bind_rows(
lasso_tune |>
collect_metrics() |>
mutate(
model = "lasso"
)
) |>
bind_rows(
ridge_tune |>
collect_metrics() |>
mutate(
model = "ridge"
)
) |>
filter(.metric == "rmse") |>
ggplot(aes(penalty, mean, color = model)) +
geom_jitter(width = .1) +
geom_smooth(se = FALSE)
elastic_tune |>
collect_metrics() |>
mutate(
model = "elastic"
) |>
bind_rows(
lasso_tune |>
collect_metrics() |>
mutate(
model = "lasso"
)
) |>
bind_rows(
ridge_tune |>
collect_metrics() |>
mutate(
model = "ridge"
)
) |>
filter(.metric == "rmse") |>
ggplot(aes(penalty, mean, color = model)) +
geom_point() +
geom_smooth(se = FALSE)
elastic_tune |>
collect_metrics() |>
mutate(
model = "elastic"
) |>
bind_rows(
lasso_tune |>
collect_metrics() |>
mutate(
model = "lasso"
)
) |>
bind_rows(
ridge_tune |>
collect_metrics() |>
mutate(
model = "ridge"
)
) |>
filter(.metric == "rmse") |>
ggplot(aes(penalty, mean, color = model)) +
geom_point() +
geom_smooth(se = FALSE)
```
elastic_tune |>
collect_metrics() |>
mutate(
model = "elastic"
) |>
bind_rows(
lasso_tune |>
collect_metrics() |>
mutate(
model = "lasso"
)
) |>
bind_rows(
ridge_tune |>
collect_metrics() |>
mutate(
model = "ridge"
)
) |>
filter(.metric == "rmse") |>
ggplot(aes(penalty, mean, color = model)) +
geom_point() +
geom_smooth(
se = FALSE,
method = "loess"
)
elastic_tune |>
collect_metrics() |>
mutate(
model = "elastic"
) |>
bind_rows(
lasso_tune |>
collect_metrics() |>
mutate(
model = "lasso"
)
) |>
bind_rows(
ridge_tune |>
collect_metrics() |>
mutate(
model = "ridge"
)
) |>
filter(.metric == "rmse") |>
ggplot(aes(penalty, mean, color = model)) +
geom_point() +
geom_smooth(
se = FALSE,
method = "loess",
formula = "y ~ x"
)
elastic_tune |>
collect_metrics() |>
mutate(
model = "elastic"
) |>
bind_rows(
lasso_tune |>
collect_metrics() |>
mutate(
model = "lasso"
)
) |>
bind_rows(
ridge_tune |>
collect_metrics() |>
mutate(
model = "ridge"
)
) |>
filter(.metric == "rmse") |>
ggplot(aes(penalty, mean, color = model)) +
geom_point() +
geom_smooth(
se = FALSE,
method = "loess",
formula = "y ~ x"
) +
geom_bw()
elastic_tune |>
collect_metrics() |>
mutate(
model = "elastic"
) |>
bind_rows(
lasso_tune |>
collect_metrics() |>
mutate(
model = "lasso"
)
) |>
bind_rows(
ridge_tune |>
collect_metrics() |>
mutate(
model = "ridge"
)
) |>
filter(.metric == "rmse") |>
ggplot(aes(penalty, mean, color = model)) +
geom_point() +
geom_smooth(
se = FALSE,
method = "loess",
formula = "y ~ x"
) +
theme_bw()
elastic_tune |>
collect_metrics() |>
mutate(
model = "elastic"
) |>
bind_rows(
lasso_tune |>
collect_metrics() |>
mutate(
model = "lasso"
)
) |>
bind_rows(
ridge_tune |>
collect_metrics() |>
mutate(
model = "ridge"
)
) |>
ggplot(aes(penalty, mean, color = model)) +
geom_point() +
geom_smooth(
se = FALSE,
method = "loess",
formula = "y ~ x"
) +
facet_wrap(~.metric, ncol = 2)
elastic_tune |>
collect_metrics() |>
mutate(
model = "elastic"
) |>
bind_rows(
lasso_tune |>
collect_metrics() |>
mutate(
model = "lasso"
)
) |>
bind_rows(
ridge_tune |>
collect_metrics() |>
mutate(
model = "ridge"
)
) |>
ggplot(aes(penalty, mean, color = model)) +
geom_point() +
geom_smooth(
se = FALSE,
method = "loess",
formula = "y ~ x"
) +
facet_wrap(~.metric, ncol = 2) +
theme_bw()
elastic_tune |>
collect_metrics() |>
mutate(
model = "elastic"
) |>
bind_rows(
lasso_tune |>
collect_metrics() |>
mutate(
model = "lasso"
)
) |>
bind_rows(
ridge_tune |>
collect_metrics() |>
mutate(
model = "ridge"
)
) |>
ggplot(aes(penalty, mean, color = model)) +
geom_point() +
geom_smooth(
se = FALSE,
method = "loess",
formula = "y ~ x"
) +
facet_wrap(~.metric, nrow = 2, scales = "free") +
theme_bw()
elastic_tune |>
show_best()
#| label: fig-performance
#| fig-cap: Regularization Performance
elastic_tune |>
collect_metrics() |>
mutate(
model = "elastic"
) |>
bind_rows(
lasso_tune |>
collect_metrics() |>
mutate(
model = "lasso"
)
) |>
bind_rows(
ridge_tune |>
collect_metrics() |>
mutate(
model = "ridge"
)
) |>
ggplot(aes(penalty, mean, color = model)) +
geom_point() +
geom_smooth(
se = FALSE,
method = "loess",
formula = "y ~ x"
) +
facet_wrap(~.metric, nrow = 2, scales = "free") +
theme_bw()
elastic_tune |>
show_best("rmse")
elastic_tune |>
show_best(metric = "rmse")
elastic_tune |>
select_best("rmse")
elastic_tune |>
select_best(metric = "rmse")
best_tune <- elastic_tune |>
select_best(metric = "rmse")
finalize_workflow() |>
elastic_wf |>
best_tune
finalize_workflow(
elastic_wf |>
best_tune
)
finalize_workflow(
elastic_wf,
best_tune
)
finalize_workflow(
x = elastic_wf,
parameters = best_tune
)
final_wf <- finalize_workflow(
x = elastic_wf,
parameters = best_tune
)
final_wf
last_fit <- final_wf |>
last_fit(split = algeria_split)
extract_fit_parsnip(last_fit)
extract_fit_parsnip(last_fit) |>
autoplot()
extract_fit_parsnip(last_fit) |>
autoplot() +
theme_bw()
pacman::p_load(nanoparquet, tidymodels, knitr, ggthemr)
?ggthemr()
ggthemr(palette = earth, layout = "minimal")
ggthemr(palette = "earth", layout = "minimal")
#| label: fig-performance
#| fig-cap: Regularization Performance
elastic_tune |>
collect_metrics() |>
mutate(
model = "elastic"
) |>
bind_rows(
lasso_tune |>
collect_metrics() |>
mutate(
model = "lasso"
)
) |>
bind_rows(
ridge_tune |>
collect_metrics() |>
mutate(
model = "ridge"
)
) |>
ggplot(aes(penalty, mean, color = model)) +
geom_point() +
geom_smooth(
se = FALSE,
method = "loess",
formula = "y ~ x"
) +
facet_wrap(~.metric, nrow = 2, scales = "free") +
theme_bw()
extract_fit_parsnip(last_fit) |>
autoplot() +
theme_bw()
additional_colors <- c("#af4242", "#535364", "#FFC300", "#e09263", "#123367")
set_swatch(c(unique(swatch()), additional_colors))
extract_fit_parsnip(last_fit) |>
autoplot() +
theme_bw()
```{r}
last_fit <- final_wf |>
last_fit(split = algeria_split)
theme_bw()
extract_fit_parsnip(last_fit) |>
autoplot() +
labs(
x = "Lambda",
y = "Coefficients"
) +
theme_bw()
extract_fit_parsnip(last_fit) |>
autoplot() +
labs(
x = "Lambda",
y = "Coefficients"
) +
scale_x_continuous(labels = label_number()) +
theme_bw()
extract_fit_parsnip(last_fit) |>
autoplot() +
labs(
x = "Lambda",
y = "Coefficients"
) +
scale_x_continuous(labels = label_log()) +
theme_bw()
extract_fit_parsnip(last_fit) |>
autoplot() +
labs(
x = "Lambda",
y = "Coefficients"
) +
scale_x_continuous(labels = label_comma()) +
theme_bw()
extract_fit_parsnip(last_fit) |>
autoplot() +
labs(
x = "Lambda",
y = "Coefficients"
) +
scale_x_continuous(labels = label_value()) +
theme_bw()
extract_fit_parsnip(last_fit) |>
autoplot() +
labs(
x = "Lambda",
y = "Coefficients"
) +
theme_bw()
library(vip)
last_fit |>
pull_workflow_fit()
vip(last_fit)
vip(final_wf)
vip(final_wf |>
fit(algeria_train))
vip(final_wf |>
fit(algeria_train))
last_fit |>
collect_metrics()
last_fit |>
collect_metrics() |>
kable()
final_wf |>
kable()
range(algeria_ff$fwi)
